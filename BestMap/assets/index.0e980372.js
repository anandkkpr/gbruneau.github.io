import"https://cdn.skypack.dev/leaflet@1.7.1";import"https://cdn.skypack.dev/leaflet-rotate@0.1.4";import"https://maxwell-ilai.github.io/Leaflet.SidePanel/dist/leaflet-sidepanel.min.js";const x=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}};x();var k="hsl(197, 100%, 60%)",C=window.location.search,p=new URLSearchParams(C),I=p.has("z")==!0?Number(p.get("z")):10,O=p.has("lat")==!0?Number(p.get("lat")):46.7,N=p.has("lng")==!0?Number(p.get("lng")):-71.3,_=p.has("rot")==!0?Number(p.get("rot")):0,z=p.has("m")==!0?p.get("m").toString()=="true":!1,G=p.has("t")==!0?p.get("t"):"New Map",g="538d4534960f4226bb8ca146e7df3941",Z="e9xKxlmCUuPGGQvk3FYwqWWmXgyvomdDUECpkBfjQA1obipCjNRKwWlHd1pYr5K2",A="//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",P='Map data \xA9 <a href="http://openstreetmap.org">OpenStreetMap FR</a> contributors',R=new L.TileLayer(A,{minZoom:1,maxZoom:20,attribution:P,BMname:"OSM France",BMicon:"osmFR.png"}),$="https://m1.mapserver.mapy.cz/base-m/{z}-{x}-{y}",D='Map data \xA9 <a href="http://openstreetmap.org">OpenStreetMap CZ</a> contributors',U=new L.TileLayer($,{minZoom:1,maxZoom:20,attribution:D,BMname:"OSM Check Republic",BMicon:"osmCZ.png"}),W='OSM Mapnik <a href="http://www.openstreetmap.org/copyright">OpenStreetMap ORG</a>',H="http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",K=L.tileLayer(H,{maxZoom:19,attribution:W,BMname:"Open Street Map",BMicon:"Mapnik.png"}),F=L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:18,ext:"png",BMname:"Stamen Terrain Map",BMicon:"Stamen_Terrain.png"}),J=L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:1,maxZoom:16,ext:"jpg",BMname:"Stamen Watercolor",BMicon:"Stamen_Watercolor.jpg"}),Q=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC",maxZoom:16,BMname:"National Geographic",BMicon:"Esri_NatGeoWorldMap.png"}),V=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012",BMname:"ESRI Street",BMicon:"ESRIMap.png"}),Y=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community",BMname:"ESRI Topo",BMicon:"ESRITopo.png"}),q=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',BMname:"Open Topo Map",BMicon:"OpenTopoMap.png"}),X=L.tileLayer("https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",{maxZoom:20,attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',BMname:"Cyclo OSM",BMicon:"CyclOSM.png"}),j=L.tileLayer("https://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png?apikey={apikey}",{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',apikey:g,maxZoom:22,BMname:"Thunderforest Outdoors",BMicon:"Thunderforest_Outdoors.png"}),ee=L.tileLayer("https://{s}.tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey={apikey}",{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',apikey:g,maxZoom:22,BMname:"Thunderforest Pioneer",BMicon:"Thunderforest_Pioneer.png"}),te=L.tileLayer("https://{s}.tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey={apikey}",{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',apikey:g,maxZoom:22,BMname:"Thunderforest Neighbourhood",BMicon:"Thunderforest_Neighbourhood.png"}),re=L.tileLayer("https://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey={apikey}",{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',apikey:g,maxZoom:22,BMname:"Thunderforest Open Cycle Map",BMicon:"Thunderforest_OpenCycleMap.png"}),ae=L.tileLayer("https://{s}.tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png?apikey={apikey}",{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',apikey:g,maxZoom:22,BMname:"Thunderforest Mobile Atlas",BMicon:"Thunderforest_MobileAtlas.png"}),oe=L.tileLayer("https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey={apikey}",{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',apikey:g,maxZoom:22,BMname:"Thunderforest Landscape",BMicon:"Thunderforest_Landscape.png"}),ne=L.tileLayer("https://{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey={apikey}",{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',apikey:g,maxZoom:22,BMname:"Thunderforest Transport",BMicon:"Thunderforest_Transport.png"}),ie=L.tileLayer("https://{s}.tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png?apikey={apikey}",{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',apikey:g,maxZoom:22,BMname:"Thunderforest Transport Dark",BMicon:"Thunderforest_TransportDark.png"}),se=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",BMname:"ESRI Image",BMicon:"ESRIImg.png"}),pe=L.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],BMname:"Google Map",BMicon:"GoogleMap.png"}),ce=L.tileLayer("http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],BMname:"Google Satellite",BMicon:"GoogleSat.png"}),me=L.tileLayer("http://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],BMname:"Google Terrain",BMicon:"GoogleTerrain.png"}),le=L.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20,BMname:"CartoDB Voyager",BMicon:"CartoDB_VoyagerLabelsUnder.png"}),ye=L.tileLayer("https://tile.jawg.io/4284c312-895e-4aa5-9c79-c8974c53f9d3/{z}/{x}/{y}{r}.png?access-token={accessToken}",{attribution:'<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',minZoom:0,maxZoom:22,subdomains:"abcd",accessToken:Z,BMname:"Jawn GB",BMicon:"Jawg_GBMain.png"}),ge=L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png",BMname:"Stamen Toner Lite",BMicon:"Stamen_TonerLite.png"}),m=[{category:"Base Map",layers:[ye,K,pe,R,U,V,Q,te]},{category:"Topo",layers:[q,j,oe,me,F,Y]},{category:"Imagery",layers:[ce,se]},{category:"Transport",layers:[ae,ne,ie,X,re,le]},{category:"Miscelaneous",layers:[ee,ge,J]}],r=L.map("map",{center:new L.LatLng(O,N),zoom:I,zoomControl:!1,rotate:!0,touchRotate:!0,rotateControl:!1,BMHasMarker:!1,BMTitle:G,bearing:_}),y,de=p.has("l")==!0?p.get("l"):0;r.addLayer(T(de));L.control.sidepanel("panelID",{panelPosition:"left",hasTabs:!0,tabsPosition:"top",pushControls:!0,darkMode:!0,startTab:"tab-1"}).addTo(r);document.getElementById("btRotateNorth").addEventListener("click",function(){r.setBearing(0)});function ue(e){var t=e.coords,n=Math.min(Math.max(Math.ceil(Math.log(t.accuracy)/Math.log(2)),0),20);n=14,r.flyTo(new L.LatLng(t.latitude,t.longitude),n)}function he(e){e.code==1?console.log("getCurrentPosition Error: Access is denied!"):e.code==2&&console.log("getCurrentPosition Error: Position is unavailable!")}document.getElementById("goHere").addEventListener("click",function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(ue,he)});function c(){var e,t,n,i,a,o,s;a=r.options.BMTitle,r.options.BMHasMarker?(e=y.getLatLng().lat,t=y.getLatLng().lng):(e=r.getCenter().lat,t=r.getCenter().lng),n=r.getZoom(),i=b(r.getBearing()),o=r.options.BMHasMarker;for(var d=0,h=Object.getOwnPropertyNames(r._layers),l=0;l<h.length;l++){var f=h[l];s=r._layers[f],Object.getOwnPropertyNames(s).includes("_icon")||(d=f)}var M=r._layers[d].options.BMname,u=0;u=ve(M),document.getElementById("curTitle").innerText=a,document.getElementById("fTitle").value=a,document.getElementById("curLat").innerText=e,document.getElementById("curLng").innerText=t;for(var v=document.getElementsByClassName("BM-Layer-Bt"),l=0;l<v.length;l++){var B=v[l].getElementsByTagName("img")[0];l==u?B.style.borderColor=k:B.style.borderColor="black"}r.options.BMHasMarker?(y.setTooltipContent(a),document.getElementById("btFlipMarker").innerText="Remove Marker"):document.getElementById("btFlipMarker").innerText="Add Marker",document.getElementById("curZoom").innerText=n,document.getElementById("currot").innerText=i,document.getElementById("curLayID").innerText=u,document.getElementById("curLayName").innerText=M,document.getElementById("curHasMarker").innerText=o;var E=`l=${u}&z=${n}&lat=${e}&lng=${t}&rot=${i}&m=${o}&t=${a}`;document.title=`BestMap: ${a}`,window.history.pushState({},a,`${location.pathname}?${E}`)}r.on("rotate",function(e){c()});r.on("resize",function(e){c()});r.on("zoom",function(e){c()});r.on("move",function(e){c()});function b(e){var t=parseInt(e);return e<0?t=360- -e%360:t=e%360,parseInt(t)}function fe(){var e;e=b(parseInt(document.getElementById("currot").innerText)),r.setBearing(e),c()}document.getElementById("currot").addEventListener("keypress",e=>{(e.key<"0"||e.key>"9")&&e.preventDefault(),(e.key==="Enter"||e.key==="Tab")&&(e.preventDefault(),fe())});document.getElementById("fTitle").addEventListener("change",e=>{r.options.BMTitle=document.getElementById("fTitle").value,c()});document.getElementById("shareToClipboard").addEventListener("click",function(){navigator.clipboard.writeText(window.location.href)});function w(e){var t=parseInt(e);isNaN(t)&&(t=0),r.eachLayer(function(n){Object.getOwnPropertyNames(n).includes("_icon")||r.removeLayer(n)}),r.addLayer(T(t)),c()}function Me(){for(var e=document.getElementById("BM-Layer-Nav-Panel"),t=0,n=0;n<m.length;n++){for(var i='<div class="BM-Layer-Nav-Container">',a=m[n].layers,o=0;o<a.length;o++){var s=`BMLayer-${t}`;i+=`<div class="BM-Layer-Bt" id="${s}">
            <img src='layerIcons/${a[o].options.BMicon}'
                 title='${m[n].layers[o].options.BMname}'>
            <div class="BM-Layer-Bt-Name">${m[n].layers[o].options.BMname}</div>
            </div>`,t++}i+="</div>";var d=`<div class="BM-Layer-Nav-Category">${m[n].category}</div>${i}`;e.innerHTML+=d}}function T(e){var t=0,n,i,a=parseInt(e);isNaN(a)&&(a=0);for(var o=0;o<m.length;o++){i=m[o].layers;for(var s=0;s<i.length;s++)o===0&&s===0&&(n=i[s]),t===a&&(n=i[s]),t++}return n}function ve(e){for(var t=0,n=0,i,a=0;a<m.length;a++){i=m[a].layers;for(var o=0;o<i.length;o++)i[o].options.BMname==e&&(n=t),t++}return n}function Le(){document.addEventListener("click",function(e){if(e.target.matches(".BM-Layer-Bt img")){var t=e.target.parentElement.id.split("-")[1];w(t)}if(e.target.matches(".BM-Layer-Bt div")){var t=e.target.parentElement.id.split("-")[1];w(t)}},!1)}function Be(){document.getElementById("goOSM").addEventListener("click",function(){var e=r.getCenter(),t=r.getZoom(),n=`https://www.openstreetmap.org/#map=${t}/${e.lat}/${e.lng}`;window.open(n)}),document.getElementById("goGoogle").addEventListener("click",function(){var e=r.getCenter();r.getZoom();var t=`https://www.google.com/maps/search/?api=1&query=${e.lat},${e.lng}`;window.open(t)})}document.getElementById("btFlipMarker").addEventListener("click",function(){S()});function S(){r.options.BMHasMarker?r.removeLayer(y):(y=new L.Marker(r.getCenter(),{draggable:!0}),y.bindTooltip(r.options.BMTitle),y.on("dragend",function(e){c()}),r.addLayer(y)),r.options.BMHasMarker=!r.options.BMHasMarker,c()}z&&S();Me();Le();Be();c();
